
import { invalid, valid, submitWithInvalid, submitWithValid, onload_form, stopRefresh, sweetalert } from "./master/functions.js";



var datePickers = document.querySelectorAll(".date");
  datePickers.forEach(function(datePicker) {
    var datePickerId = datePicker.getAttribute("id");
    flatpickr(datePicker, {
      allowInput:true,
      disableMobile: "true",
      //  defaultDate: "2023-03-01", // Replace with your default date
      //  minDate: "2023-03-01", // Replace with your minimum date
      //  maxDate: "2023-12-31", // Replace with your maximum date
      dateFormat: "d-m-Y", // Replace with your desired date format
    });
});


window.onload = (event) => {
  console.log("Event Type ðŸ‘‰ " + event.type);



  //? ~~~~~~~~~~~~~~~~~~~~~~~~~[test page start]~~~~~~~~~~~~~~~~~~~~~~~~~
  if($('[data-page-name=landing]').length) {
    if(($('[href*=owl]').length) && ($('.owl-hero').length)) {
      $('.owl-hero').owlCarousel({
        loop:true,
        margin:10,
        nav:true,
        dots:false,
        responsive:{
            0:{
                items:1
            },
            600:{
                items:1
            },
            1000:{
                items:1
            }
        },
        nav: true,
        navText: ["<img src='assets/img/svg/arrowLeftBlack.svg'>","<img src='assets/img/svg/arrowRightBlack.svg'>"]
      })
    }
    if(($('[href*=owl]').length) && ($('.owl-allCategories').length)) {
      $('.owl-allCategories').owlCarousel({
        loop:false,
        margin:20,
        center: false,
        dots:false,
        nav:true,
        stagePadding: 40,
        responsive:{
            0:{
                items:3
            },
            600:{
                items:6
            },
            1000:{
                items:8
            }
        },
        nav: true,
        navText: ["<img src='assets/img/svg/arrowLeftBlack.svg'>","<img src='assets/img/svg/arrowRightBlack.svg'>"]
      })
    }
    // (() => {
    //   const validation_signin = document.querySelectorAll('.needs-validation-signin')

    //   Array.from(validation_signin).forEach(form => {
    //     const validationFormID = validation_signin;
    //     form.addEventListener('submit', event => {
    //       if (!form.checkValidity()) {
    //         submitWithInvalid(event);
    //       } else {
    //       let data = JSON.parse(submitWithValid(event));
          
    //         $.ajax({
    //           url: 'store',
    //           type: "post",
    //           dataType: "json",
    //           data: {
    //             "_token": data._token,
    //             "email":data.email,
    //             "password":data.password
    //           },
    //           success: function ({ data }) {
    //             submitWithValid(event);
    //             window.location.href = "dashboard";
    //           },
    //           error: function (data) {
    //             submitWithInvalid(event);
    //             let obj = JSON.parse(data.responseText);
    //             if(obj.error == "emailError" ){
    //               swal.fire({
    //                 icon: 'warning',
    //                 text: 'Invalid Credentials',
    //                 position: 'top-end',
    //                 showConfirmButton: false,
    //                 timer: 2000
    //               });
    //             }  
    //           }
    //         });
    //         stopRefresh(event);
          
          
    //       }

    //       form.classList.add('was-validated')
    //     }, false);

    //     let onload_formData = onload_form(event,form,validationFormID[0]);
    //     if(onload_formData != undefined) {
    //       // console.log(onload_formData);
    //     }
    //     ['input','paste','change'].forEach(function(event){
    //       form.addEventListener(event,function (event) {
    //         signin(event)
    //       }, false);
    //     });
    //     $(form).on('select2:select', (event) => {
    //         signin(event);
    //     });
    //     function signin(event) {
    //       if (!form.checkValidity()) {
    //         invalid(event)
    //       } else {
    //           let input_formData = valid(event,form,validationFormID[0]);
    //           if(input_formData != undefined) {
    //             // console.log(input_formData);
    //           }
    //       }
    //       form.classList.add('was-validated')
    //     }
    //   })
    // })();
  }
  //! ~~~~~~~~~~~~~~~~~~~~~~~~~[test page end]~~~~~~~~~~~~~~~~~~~~~~~~~


}

if($('.productImgCarousel').length) {
  $('.productImgCarousel').owlCarousel({
    loop: true,
    items: 16,
    margin: 0,
    nav: false,
    dots: false,
    center: false,
    freeDrag: false,
    lazyLoad: true,
    autoplay:false,
    autoplayTimeout:1500,
    autoplayHoverPause:true,
    smartSpeed: 1000,
    responsiveClass: true,
    responsive: {
        0: {
            items: 1,
        },
        576: {
            items: 1,
        },
        768: {
            items: 1,
        },
        992: {
            items: 1,
        },
        1200: {
            items: 1,
        }
    },
});
}
if(document.querySelector('#sortValue')) {
  let sortLabels = document.querySelectorAll('.sortLabel');
  let sortValue = document.querySelector('#sortValue');
  
  sortLabels.forEach(sortLabel =>{
      sortLabel.addEventListener('click', (e)=>{
          console.log(e.currentTarget.innerHTML)
          sortValue.innerHTML = e.currentTarget.innerHTML;
      })
  });
}










